<h2 id="newClassificationHeading">Add New Classification</h2>

<p class="form-instructions">
  Classification names cannot contain spaces or special characters.
</p>

<!-- Flash Messages -->
<% if (typeof messages !== "undefined" && messages.length > 0) { %>
  <div class="flash-message">
    <%- messages %>
  </div>
<% } %>

<!-- Error Display -->
<% if (errors && errors.length > 0) { %>
  <div class="error-message">
    <ul>
      <% errors.forEach(function (error) { %>
        <li><%= error.msg %></li>
      <% }); %>
    </ul>
  </div>
<% } %>

<!-- Add Classification Form -->
<form action="/inv/add-classification" method="post" class="classification-form">
  <label for="classification_name">Classification Name:</label>
  <input
    type="text"
    id="classification_name"
    name="classification_name"
    required
    pattern="^[a-zA-Z0-9]+$"
    title="Classification name must be alphanumeric without spaces or special characters."
    value="<%= typeof classification_name !== 'undefined' ? classification_name : '' %>"
  >
  <span class="validation-message"></span>
  <button type="submit">Add Classification</button>
</form>

<script>
  document.querySelector('.classification-form').addEventListener('submit', (event) => {
    const classificationInput = document.getElementById('classification_name');
    const errorMessage = classificationInput.nextElementSibling;

    // Clear previous error message
    errorMessage.textContent = '';

    // Validate input
    const value = classificationInput.value.trim();
    if (!/^[a-zA-Z0-9]+$/.test(value)) {
      event.preventDefault();
      classificationInput.classList.add('error');
      errorMessage.textContent = 'Classification name must be alphanumeric without spaces or special characters.';
      classificationInput.focus();
    } else {
      classificationInput.classList.remove('error');
    }
  });
</script>